hostname: autovm
package_update: true
package_upgrade: true

packages:
  - docker.io
#its a test only for communication through bind mounts, doesn't have logic yet
runcmd:
  - mkdir -p /mnt/logs
  - mount -t 9p -o trans=virtio,version=9p2000.L shared_logs /mnt/logs
  - systemctl enable docker
  - systemctl start docker
  - docker run -d \
      --restart=always \
      --name logcollector \
      -v /mnt/logs:/var/log/myapp \
      bash -c "while true; do echo \"$(date) TEST LOG\" >> /var/log/myapp/test.log; sleep 1; done"
